---
layout: post
title: GitTfs. ¡TFS y SCM Activity Plugin ya pueden ser amigos!
date: '2014-05-21T14:42:00.000+02:00'
author: Alejandro Piera
categories:
- sonarqube
- plugins
modified_time: '2014-05-23T11:56:01.827+02:00'
thumbnail: http://2.bp.blogspot.com/-pV-mMb2tLv8/U32frRWbU-I/AAAAAAAAAAc/inIqk5q2aQE/s72-c/logo@2x.png
blogger_id: tag:blogger.com,1999:blog-6299073294914176200.post-3243790467510356864
redirect_from: /2014/05/gittfs-ahora-tfs-y-scm-activity-plugin.html
---

<div class="MsoNormal" style="margin: 7.5pt 0cm 0.0001pt;">Actualmente, el plugin <b><a href="http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin" target="_blank"><span style="color: #3d85c6;">SCM Activity</span></a></b> de <span style="color: #3d85c6;"><a href="http://www.sonarqube.org/" target="_blank"><b><span style="color: #3d85c6;">SonarQube</span></b> </a></span>no soporta oficialmente <a href="http://www.visualstudio.com/en-us/products/tfs-overview-vs.aspx" target="_blank"><span style="color: #3d85c6;"><b>Team Foundation Serve</b>r</span></a> (TFS), por lo que, hasta ahora, era imposible acceder a este repositorio para extraer la información que SCM Activity puede proporcionar. En este artículo explicamos cómo poder extraer la información necesaria sobre los commits, utilizando <b><a href="https://github.com/git-tfs/git-tfs/blob/master/README.md" target="_blank"><span style="color: #3d85c6;">GitTfs</span></a></b>. Esta herramienta es un puente entre nuestro servidor TFS y SCM Activity Plugin, y para utilizarlo debemos seguir los siguientes pasos.&nbsp;</div><div class="MsoNormal" style="margin: 7.5pt 0cm 0.0001pt;"><b>La instalación, configuración y uso de GitTfs se ha realizado en sistemas operativos Windows</b><br /><h2><span style="font-family: inherit; text-indent: -18pt;"><br /></span></h2><b><span style="font-size: x-large;">Instalación de Git</span></b></div><div><ul><a href="http://git-scm.com/download/win" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;" target="_blank"><img alt="Git" border="0" src="http://2.bp.blogspot.com/-pV-mMb2tLv8/U32frRWbU-I/AAAAAAAAAAc/inIqk5q2aQE/s1600/logo@2x.png" height="83" title="" width="200" /></a><li><span style="font-family: inherit; text-indent: -18pt;">Descargar <a href="http://git-scm.com/download/win" target="_blank"><b><span style="color: #3d85c6;">Git </span></b></a>de la página oficial</span></li><ul><li><a href="http://git-scm.com/download/win" target="_blank"><b><span style="color: #3d85c6;">http://git-scm.com/download/win</span></b></a></li></ul><li>Con la instalación por defecto funciona correctamente</li><li>Añadir a la variable de entorno <span style="font-family: Courier New, Courier, monospace;">PATH </span>varias rutas</li><ul><li><span style="font-family: 'Courier New', Courier, monospace;">&lt;Git path&gt;\bin</span></li><li><span style="font-family: 'Courier New', Courier, monospace;">&lt;Git path&gt;\cmd</span></li></ul></ul><h2><span style="font-family: inherit;"><br /></span></h2><b><span style="font-size: x-large;">Instalación de GitTfs</span></b></div><br />Para realizar esta tarea existen dos formas de instalar  esta herramienta, desde la página oficial o a través de la aplicación Chocolatey. Ambas formas de instalar GitTfs son muy sencillas, por lo que utilizar una u otra dependerá de nuestras preferencias. En excentia hemos probado las dos opciones y hemos conseguido que la herramienta funcione a la perfección en ambas. Explicamos las distintas opciones a continuación:<br /><div><ul style="margin-top: 0cm;" type="disc"></ul></div><b><span style="font-size: large;"></span></b><br /><div><b><span style="font-size: large;"><b><span style="font-size: large;"><br /></span></b></span></b></div><b><span style="font-size: large;">Desde la página oficial</span></b><br /><ul><li>Descargar <a href="https://github.com/git-tfs/git-tfs/releases" target="_blank"><span style="color: #3d85c6;"><b>GitTfs</b></span> </a>y descomprimirlo en una carpeta</li><ul><li><a href="https://github.com/git-tfs/git-tfs/releases" target="_blank"><span style="color: #3d85c6;"><b>https://github.com/git-tfs/git-tfs/releases</b></span></a></li></ul><li>Añadir a la variable de entorno <span style="font-family: Courier New, Courier, monospace;">PATH </span>la ruta donde se ha descomprimido</li><ul><li><span style="font-family: Courier New, Courier, monospace;">&lt;GitTfs path&gt;</span></li></ul></ul><b><span style="font-size: large;"></span></b><br /><div><b><span style="font-size: large;"><b><span style="font-size: large;"><br /></span></b></span></b></div><b><span style="font-size: large;">Con Chocolatey</span></b><br /><div><a href="http://chocolatey.org/" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" target="_blank"><img alt="Chocolatey" border="0" src="http://1.bp.blogspot.com/-lXZhFMbbJ5g/U32fBDiG1MI/AAAAAAAAAAU/p1XVQV5q9QY/s1600/chocolateyicon.gif" title="" /></a></div><br />Para quien no conozca esta aplicación, <a href="http://chocolatey.org/" target="_blank"><span style="color: #3d85c6;"><b>Chocolatey </b></span></a>es un gestor de paquetes similar a apt-get de Linux, pero pensado para Windows. <br /><br /><br /><br />Si queremos utilizar este sistema debemos seguir los siguientes pasos:<br /><div><ul><li>Instalar Chocolatey desde la página oficial (<a href="http://chocolatey.org/" target="_blank"><b><span style="color: #3d85c6;">http://chocolatey.org/</span></b></a>) o ejecutar el siguiente comando desde nuestra consola:</li></ul><span style="font-family: Courier New, Courier, monospace;">@powershell -NoProfile -ExecutionPolicy unrestricted -Command "iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))" &amp;&amp; SET PATH=%PATH%;%systemdrive%\chocolatey\bin</span><br /><ul><li>Una vez instalado Chocolatey, instalaremos <a href="http://chocolatey.org/packages/gittfs" target="_blank"><span style="color: #3d85c6;"><b>GitTfs Chocolatey package</b></span></a> como indica en la página oficial (<a href="http://chocolatey.org/packages/gittfs" target="_blank"><b><span style="color: #3d85c6;">http://chocolatey.org/packages/gittfs</span></b></a>) o ejecutar el siguiente comando desde nuestra consola:</li></ul><span style="font-family: Courier New, Courier, monospace;">cinst gittfs</span><br /><h2></h2><b><span style="font-size: x-large;"><br /></span></b><b><span style="font-size: x-large;">Utilización de GitTfs</span></b><br /><div><br />Lo primero que se debe hacer es <b>clonar </b>nuestro repositorio TFS en el directorio deseado. Para ello, debemos ejecutar desde línea de comandos la siguiente instrucción desde la línea de comandos:</div><div><span lang="EN-US" style="line-height: 107%;"><span style="font-family: Courier New, Courier, monospace;"><br /></span></span></div><div><span lang="EN-US" style="line-height: 107%;"><span style="font-family: Courier New, Courier, monospace;">git tfs clone&nbsp;&lt;serverPath&gt;&nbsp;&lt;projectPath&gt; &lt;localPath&gt; -u=&lt;username&gt; -p=&lt;password&gt;</span></span></div><div><br /></div>Esta tarea puede durar desde unos pocos minutos hasta varias horas, todo depende del tamaño de nuestro repositorio y de la cantidad de commits que se han realizado en él, porque con este comando se extrae toda la información posible del repositorio (fecha de cada commit, usuario de cada commit, comentario de cada commit, ficheros por commit, etc).</div><div><div><i><br /></i><i>Aquí tienes un ejemplo:&nbsp;</i></div><div><span style="font-family: Courier New, Courier, monospace;">git tfs clone http://123.45.67.89:8080/tfs $/GlobalProject/Project C:\TfsRepository\GlobalProject\Project -u=user -p=password</span></div></div><div><br />Una vez hecho esto, cada vez que haya un nuevo commit en el repositorio, nosotros también querremos tener este nuevo cambio, por lo que deberemos actualizar a la última versión. Para ello, haremos un <b>pull</b>, para que así solo se descarguen los últimos commits realizados en el repositorio. Ejecutaremos desde línea de comandos la siguiente instrucción:</div><div><div><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;">cd &lt;localPath&gt;&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">git tfs pull</span></div><div><br /></div><div><i>Aquí tienes un ejemplo:</i></div><div><span style="font-family: Courier New, Courier, monospace;">cd C:\TfsRepository\GlobalProject\Project&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace;">git tfs pull</span></div></div><br />Si seguimos todos estos pasos, tendremos un repositorio TFS sincronizado en Git para poder realizar los análisis y extraer la información de los desarrolladores, algo que hasta ahora no podíamos hacer.<br /><h2></h2><b><span style="font-size: x-large;"><br /></span></b><b><span style="font-size: x-large;">Análisis del proyecto</span></b><br /><div><div><br />Si vamos a realizar el análisis desde el directorio en el que tenemos el repositorio de Git, sonar-runner reconocerá el tipo de control de versiones utilizado y tan solo deberemos añadir los parámetros <span style="font-family: Courier New, Courier, monospace;">sonar.scm.enabled</span> y <span style="font-family: Courier New, Courier, monospace;">sonar.scm-stats.enabled</span> y asignarlos a true</div><div><i><br /></i><i>Aquí tienes un ejemplo:</i></div><div><a href="http://www.excentia.es/plugins/devteam/descargar.html" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;" target="_blank"><img alt="DevTeam Plugin" border="0" src="http://3.bp.blogspot.com/-FeJCGZXF-4A/U32enilrMPI/AAAAAAAAAAM/Fwaq8kNzO10/s1600/devteam.png" height="200" title="" width="200" /></a><span style="font-family: Courier New, Courier, monospace;">sonar.scm.enabled=true</span></div><div><span style="font-family: Courier New, Courier, monospace;">sonar.scm-stats.enabled=true</span></div></div><h2><span style="font-size: small; font-weight: normal;"><br /></span></h2>En definitiva, si seguimos los pasos descritos en el artículo, podremos llegar a conectar <a href="http://www.visualstudio.com/en-us/products/tfs-overview-vs.aspx" target="_blank"><b><span style="color: #3d85c6;">Team Foundation Server</span></b></a> con <a href="http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin" target="_blank"><span style="color: #3d85c6;"><b>SCM Activity Plugin</b></span></a> a través de <a href="http://git-scm.com/" target="_blank"><span style="color: #3d85c6;"><b>Git</b></span></a>, consiguiendo además, que nuestro <a href="http://www.excentia.es/plugins/devteam/descargar.html" target="_blank"><span style="color: #3d85c6;"><b>DevTeam Plugin</b></span></a> muestre información detallada de los desarrolladores. <br /><div><span style="font-size: small; font-weight: normal;"><span id="goog_422888481"></span><span id="goog_422888482"></span><br /></span></div><h2></h2><b><span style="font-size: x-large;">Enlaces de interés</span></b><br /><div><br />Por último, incluimos una serie de enlaces que pueden resultar de utilidad para completar y complementar la información de este artículo:</div><div><ul><li><a href="http://git-scm.com/" target="_blank"><b><span style="color: #3d85c6;">Git</span></b></a></li><li><a href="https://github.com/git-tfs/git-tfs/blob/master/README.md" target="_blank"><b><span style="color: #3d85c6;">GitTfs</span></b></a></li><li><a href="http://chocolatey.org/" target="_blank"><b><span style="color: #3d85c6;">Chocolatey</span></b></a></li><li><a href="http://chocolatey.org/packages/gittfs" target="_blank"><b><span style="color: #3d85c6;">GitTfs Chocolatey package</span></b></a></li><li><a href="http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin" target="_blank"><b><span style="color: #3d85c6;">SCM-Activity Plugin</span></b></a></li><li><a href="http://www.excentia.es/plugins/devteam/descargar.html" target="_blank"><b><span style="color: #3d85c6;">DevTeam Plugin</span></b></a></li></ul><div><br /></div></div>